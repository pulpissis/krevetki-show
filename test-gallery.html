<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест галереи - Креветки шоу</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="waves"></div>

    <!-- Firebase App (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <!-- Firebase Auth (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <!-- Firebase Firestore (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDs5ojcVcFK6zqiGRukpVHZo4HJ6MnqObg",
        authDomain: "krevetki-show.firebaseapp.com",
        projectId: "krevetki-show",
        storageBucket: "krevetki-show.firebasestorage.app",
        messagingSenderId: "836884753704",
        appId: "1:836884753704:web:0c879b2b52e024399e741d"
      };
      firebase.initializeApp(firebaseConfig);
    </script>

    <header>
        <h1><i class="fas fa-anchor"></i> Тест галереи</h1>
        <p class="subtitle">Отладка галереи изображений</p>
    </header>

    <div class="character-detail-container">
        <div class="back-button" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Назад
        </div>

        <div class="character-detail">
            <div class="character-detail-card">
                <div class="character-header">
                    <div class="character-portrait">
                        <img src="https://via.placeholder.com/200x300/0077B6/FFFFFF?text=Аватарка" alt="Тест" class="avatar-image" onclick="openGallery(0)">
                    </div>
                    <div class="character-info">
                        <h1>Тестовый персонаж</h1>
                        <div class="character-meta">
                            <span class="character-type">Русалка</span>
                            <span class="character-gender">Женский</span>
                        </div>
                        <p class="character-author">Автор: test@example.com</p>
                    </div>
                </div>
                
                <div class="character-content">
                    <div class="character-section">
                        <h3><i class="fas fa-image"></i> Изображения</h3>
                        <div class="character-images">
                            <div class="image-item">
                                <h4>Аватарка</h4>
                                <img src="https://via.placeholder.com/200x300/0077B6/FFFFFF?text=Аватарка" alt="Аватарка" class="detail-image" onclick="openGallery(0)">
                            </div>
                            <div class="image-item">
                                <h4>Основной арт</h4>
                                <img src="https://via.placeholder.com/400x300/FF6B6B/FFFFFF?text=Основной+арт" alt="Арт" class="detail-image" onclick="openGallery(1)">
                            </div>
                        </div>
                    </div>
                    
                    <div class="character-section">
                        <h3><i class="fas fa-images"></i> Дополнительные арты</h3>
                        <div class="arts-grid">
                            <div class="art-item" onclick="openGallery(2)">
                                <img src="https://via.placeholder.com/150x200/4ECDC4/FFFFFF?text=Арт+1" alt="Арт 1" class="art-image">
                                <div class="art-info">
                                    <h4 class="art-title">Тестовый арт 1</h4>
                                    <p class="art-description">Описание арта</p>
                                </div>
                            </div>
                            <div class="art-item" onclick="openGallery(3)">
                                <img src="https://via.placeholder.com/150x200/45B7D1/FFFFFF?text=Арт+2" alt="Арт 2" class="art-image">
                                <div class="art-info">
                                    <h4 class="art-title">Тестовый арт 2</h4>
                                    <p class="art-description">Описание арта</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для просмотра галереи -->
    <div id="galleryModal" class="gallery-modal" style="display: none;">
        <div class="gallery-content">
            <div class="gallery-header">
                <h2><i class="fas fa-images"></i> Галерея артов</h2>
                <span class="close" onclick="closeGalleryModal()">&times;</span>
            </div>
            <div class="gallery-body">
                <div class="gallery-main">
                    <img id="galleryMainImage" class="gallery-main-image" src="" alt="">
                    <button id="galleryDeleteBtn" class="gallery-delete-btn" onclick="deleteCurrentImage()" style="display: none;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="gallery-info">
                    <h3 id="galleryImageTitle"></h3>
                    <p id="galleryImageDescription"></p>
                </div>
                <div class="gallery-thumbnails" id="galleryThumbnails">
                    <!-- Миниатюры будут добавлены динамически -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Тестовые данные
        const testImages = [
            { url: 'https://via.placeholder.com/400x600/0077B6/FFFFFF?text=Аватарка', title: 'Аватарка', description: 'Тестовый персонаж' },
            { url: 'https://via.placeholder.com/600x400/FF6B6B/FFFFFF?text=Основной+арт', title: 'Основной арт', description: 'Тестовый персонаж' },
            { url: 'https://via.placeholder.com/500x700/4ECDC4/FFFFFF?text=Арт+1', title: 'Тестовый арт 1', description: 'Описание арта' },
            { url: 'https://via.placeholder.com/500x700/45B7D1/FFFFFF?text=Арт+2', title: 'Тестовый арт 2', description: 'Описание арта' }
        ];
        
        let currentImageIndex = 0;
        
        function goBack() {
            window.history.back();
        }
        
        function openGallery(startIndex = 0) {
            console.log('Открытие галереи с индексом:', startIndex);
            
            currentImageIndex = startIndex;
            
            if (currentImageIndex >= testImages.length) {
                currentImageIndex = 0;
            }
            
            const galleryModal = document.getElementById('galleryModal');
            if (galleryModal) {
                galleryModal.style.display = 'block';
                updateGalleryView();
                renderGalleryThumbnails();
            }
        }
        
        function closeGalleryModal() {
            const modal = document.getElementById('galleryModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        function updateGalleryView() {
            const mainImage = document.getElementById('galleryMainImage');
            const title = document.getElementById('galleryImageTitle');
            const description = document.getElementById('galleryImageDescription');
            
            if (currentImageIndex >= 0 && currentImageIndex < testImages.length) {
                const image = testImages[currentImageIndex];
                mainImage.src = image.url;
                title.textContent = image.title;
                description.textContent = image.description;
            }
        }
        
        function goToImage(index) {
            currentImageIndex = index;
            updateGalleryView();
            renderGalleryThumbnails();
        }
        
        function renderGalleryThumbnails() {
            const thumbnailsContainer = document.getElementById('galleryThumbnails');
            
            thumbnailsContainer.innerHTML = testImages.map((image, index) => `
                <img src="${image.url}" 
                     alt="${image.title}" 
                     class="gallery-thumbnail ${index === currentImageIndex ? 'active' : ''}"
                     onclick="goToImage(${index})">
            `).join('');
        }
        
        // Закрытие модального окна при клике вне его
        window.onclick = function(event) {
            const galleryModal = document.getElementById('galleryModal');
            if (event.target === galleryModal) {
                closeGalleryModal();
            }
        }
        
        // Закрытие по Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const galleryModal = document.getElementById('galleryModal');
                if (galleryModal && galleryModal.style.display === 'block') {
                    closeGalleryModal();
                }
            }
        });
    </script>

    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>
</body>
</html> 