<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Персонаж - Креветки шоу</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="waves"></div>

    <!-- Firebase App (compat) -->
    <script src="firebase/firebase-app-compat.js"></script>
    <!-- Firebase Auth (compat) -->
    <script src="firebase/firebase-auth-compat.js"></script>
    <!-- Firebase Firestore (compat) -->
    <script src="firebase/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDs5ojcVcFK6zqiGRukpVHZo4HJ6MnqObg",
        authDomain: "krevetki-show.firebaseapp.com",
        projectId: "krevetki-show",
        storageBucket: "krevetki-show.firebasestorage.app",
        messagingSenderId: "836884753704",
        appId: "1:836884753704:web:0c879b2b52e024399e741d"
      };
      
      try {
        firebase.initializeApp(firebaseConfig);
        console.log('Firebase инициализирован успешно');
      } catch (error) {
        console.error('Ошибка инициализации Firebase:', error);
      }
    </script>

    <header>
        <h1><i class="fas fa-anchor"></i> Креветки шоу!</h1>
        <p class="subtitle">Детальная информация о персонаже</p>
    </header>

    <div class="character-detail-container">
        <div class="back-button" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Назад к галерее
        </div>

        <div id="characterDetail" class="character-detail">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Загрузка персонажа...</p>
                <p id="debugInfo" style="font-size: 0.8em; color: #666;"></p>
            </div>
        </div>
    </div>

    <!-- Модальное окно для загрузки артов -->
    <div id="uploadArtModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-upload"></i> Загрузить новые арты</h2>
                <span class="close" onclick="closeUploadModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="uploadArtForm">
                    <div class="form-group">
                        <label for="artFiles">Выберите изображения (можно выбрать несколько):</label>
                        <input type="file" id="artFiles" name="artFiles" accept="image/*" multiple required>
                        <p class="form-hint">Можно выбрать несколько файлов одновременно (Ctrl+клик или Shift+клик)</p>
                    </div>
                    <div class="form-group">
                        <label for="artTitle">Название для всех артов:</label>
                        <input type="text" id="artTitle" name="artTitle" required placeholder="Введите название для артов">
                    </div>
                    <div class="form-group">
                        <label>Предварительный просмотр и описания:</label>
                        <div id="artPreview" class="image-preview-grid"></div>
                    </div>
                    <div class="form-actions">
                        <button type="button" onclick="closeUploadModal()" class="cancel-btn">Отмена</button>
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-upload"></i> Загрузить арты
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Модальное окно для просмотра галереи -->
    <div id="galleryModal" class="gallery-modal">
        <div class="gallery-content">
            <div class="gallery-header">
                <h2><i class="fas fa-images"></i> Галерея артов</h2>
                <span class="close" onclick="closeGalleryModal()">&times;</span>
            </div>
            <div class="gallery-body">
                <div class="gallery-main">
                    <img id="galleryMainImage" class="gallery-main-image" src="" alt="">
                    <button id="galleryDeleteBtn" class="gallery-delete-btn" onclick="deleteCurrentImage()" style="display: none;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="gallery-info">
                    <h3 id="galleryImageTitle"></h3>
                    <p id="galleryImageDescription"></p>
                </div>
                <div class="gallery-thumbnails" id="galleryThumbnails">
                    <!-- Миниатюры будут добавлены динамически -->
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2025 Креветки шоу | Создано с любульбульбулью <i class="fas fa-heart"></i></p>
        <div class="social-icons">
            <a href="https://t.me/krevetki_show" target="_blank" title="Telegram">
                <i class="fab fa-telegram"></i>
            </a>
        </div>
    </footer>

    <script>
        // Простая отладочная информация
        console.log('Страница character.html загружена');
        console.log('URL:', window.location.href);
        console.log('URL параметры:', window.location.search);
        
        // Получаем ID персонажа из URL
        const urlParams = new URLSearchParams(window.location.search);
        const characterId = urlParams.get('id');
        console.log('ID персонажа из URL:', characterId);
        
        // Показываем отладочную информацию на странице
        const debugInfo = document.getElementById('debugInfo');
        if (debugInfo) {
            debugInfo.innerHTML = `
                URL: ${window.location.href}<br>
                ID персонажа: ${characterId || 'не найден'}<br>
                Firebase: ${typeof firebase !== 'undefined' ? 'загружен' : 'не загружен'}
            `;
        }
        
        // Простая функция возврата
        function goBack() {
            window.history.back();
        }
        
        // Простые функции для модальных окон (заглушки)
        function closeUploadModal() {
            document.getElementById('uploadArtModal').style.display = 'none';
        }
        
        function closeGalleryModal() {
            document.getElementById('galleryModal').style.display = 'none';
        }
        
        function previousImage() {
            console.log('Предыдущее изображение');
        }
        
        function nextImage() {
            console.log('Следующее изображение');
        }
    </script>

    <script src="character-detail.js"></script>
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>
</body>
</html> 