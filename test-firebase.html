<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест Firebase</title>
</head>
<body>
    <h1>Тест Firebase</h1>
    <div id="status">Проверка...</div>
    <br>
    <button onclick="checkUsers()" style="padding: 10px 20px; background: #0077b6; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">
        Проверить зарегистрированных пользователей
    </button>
    <button onclick="testBurgerMenu()" style="padding: 10px 20px; background: #ff6b6b; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Тест бургер-меню
    </button>
    
    <!-- Firebase -->
    <script src="firebase/firebase-app-compat.js"></script>
    <script src="firebase/firebase-auth-compat.js"></script>
    <script src="firebase/firebase-firestore-compat.js"></script>
    
    <script>
        const statusDiv = document.getElementById('status');
        
        try {
            // Проверяем, загрузился ли Firebase
            if (typeof firebase === 'undefined') {
                statusDiv.innerHTML = '<p style="color: red;">❌ Firebase не загружен!</p>';
                throw new Error('Firebase не загружен');
            }
            
            statusDiv.innerHTML = '<p style="color: green;">✅ Firebase загружен!</p>';
            
            // Инициализируем Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyDs5ojcVcFK6zqiGRukpVHZo4HJ6MnqObg",
                authDomain: "krevetki-show.firebaseapp.com",
                projectId: "krevetki-show",
                storageBucket: "krevetki-show.firebasestorage.app",
                messagingSenderId: "836884753704",
                appId: "1:836884753704:web:0c879b2b52e024399e741d"
            };
            
            firebase.initializeApp(firebaseConfig);
            statusDiv.innerHTML += '<p style="color: green;">✅ Firebase инициализирован!</p>';
            
            // Проверяем Auth
            if (firebase.auth) {
                statusDiv.innerHTML += '<p style="color: green;">✅ Firebase Auth доступен!</p>';
            } else {
                statusDiv.innerHTML += '<p style="color: red;">❌ Firebase Auth недоступен!</p>';
            }
            
            // Проверяем Firestore
            if (firebase.firestore) {
                statusDiv.innerHTML += '<p style="color: green;">✅ Firebase Firestore доступен!</p>';
            } else {
                statusDiv.innerHTML += '<p style="color: red;">❌ Firebase Firestore недоступен!</p>';
            }
            
        } catch (error) {
            statusDiv.innerHTML += '<p style="color: red;">❌ Ошибка: ' + error.message + '</p>';
            console.error('Ошибка:', error);
        }
        
        // Функция для проверки пользователей
        window.checkUsers = async function() {
            try {
                const usersSnapshot = await firebase.firestore().collection('users').get();
                console.log('Всего пользователей:', usersSnapshot.size);
                
                let userList = 'Зарегистрированные пользователи:\n\n';
                usersSnapshot.forEach(doc => {
                    const userData = doc.data();
                    userList += `Email: ${userData.email}\n`;
                    userList += `Username: ${userData.username}\n`;
                    userList += `Role: ${userData.role}\n`;
                    userList += `UID: ${userData.uid}\n`;
                    userList += '---\n';
                });
                
                if (usersSnapshot.size === 0) {
                    userList = 'Пользователей пока нет';
                }
                
                alert(userList);
            } catch (e) {
                console.error('Ошибка при получении пользователей:', e);
                alert('Ошибка при получении пользователей: ' + e.message);
            }
        };
        
        // Функция для тестирования бургер-меню
        window.testBurgerMenu = function() {
            const burgerMenuBtn = document.getElementById('burgerMenuBtn');
            const burgerMenu = document.getElementById('burgerMenu');
            
            console.log('Тест бургер-меню:', { burgerMenuBtn, burgerMenu });
            
            if (burgerMenuBtn) {
                console.log('Кнопка бургер-меню найдена');
                burgerMenuBtn.click();
            } else {
                console.log('Кнопка бургер-меню не найдена');
            }
            
            if (burgerMenu) {
                console.log('Меню найдено, классы:', burgerMenu.className);
                setTimeout(() => {
                    console.log('Классы после клика:', burgerMenu.className);
                }, 100);
            } else {
                console.log('Меню не найдено');
            }
        };
    </script>
</body>
</html> 